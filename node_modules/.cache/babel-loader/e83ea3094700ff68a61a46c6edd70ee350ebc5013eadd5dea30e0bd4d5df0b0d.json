{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL='https://burnzip-backend.onrender.com';const DownloadPage=()=>{const[code,setCode]=useState('');const[result,setResult]=useState(null);const[error,setError]=useState('');const handleDownload=async()=>{const trimmedCode=code.trim();if(!/^[A-Za-z0-9]{10}$/.test(trimmedCode)){alert('Code must be exactly 10 alphanumeric characters.');return;}try{const response=await fetch(\"\".concat(BACKEND_URL,\"/download/\").concat(trimmedCode));const blob=await response.blob();if(!response.ok){const text=await blob.text();throw new Error(text||'Download failed');}if(blob.type==='application/json'){const json=await blob.text();setResult(JSON.parse(json));}else{const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='burnzip-download';a.click();URL.revokeObjectURL(url);setResult({message:'‚úÖ File downloaded successfully.'});}setError('');}catch(err){console.error(err);setError(\"\\u274C \".concat(err.message));setResult(null);}};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:'6vh',padding:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDCE5 Retrieve from BurnZip\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter 10-char code\",value:code,onChange:e=>setCode(e.target.value),maxLength:10,style:{padding:'8px',fontSize:'16px',marginBottom:'10px'}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDownload,style:{padding:'10px 20px',fontSize:'16px',cursor:'pointer'},children:\"Download\"}),result&&result.message&&/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'20px'},children:result.message}),result&&result.text&&/*#__PURE__*/_jsx(\"textarea\",{readOnly:true,value:result.text,rows:6,style:{width:'80%',marginTop:'20px',padding:'10px'}}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red',marginTop:'20px'},children:error})]});};export default DownloadPage;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","DownloadPage","code","setCode","result","setResult","error","setError","handleDownload","trimmedCode","trim","test","alert","response","fetch","concat","blob","ok","text","Error","type","json","JSON","parse","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","message","err","console","style","textAlign","marginTop","padding","children","placeholder","value","onChange","e","target","maxLength","fontSize","marginBottom","onClick","cursor","readOnly","rows","width","color"],"sources":["C:/Users/rbabb/BurnZip-frontend/src/DownloadPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nconst BACKEND_URL = 'https://burnzip-backend.onrender.com';\r\n\r\nconst DownloadPage = () => {\r\n  const [code, setCode] = useState('');\r\n  const [result, setResult] = useState(null);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleDownload = async () => {\r\n    const trimmedCode = code.trim();\r\n\r\n    if (!/^[A-Za-z0-9]{10}$/.test(trimmedCode)) {\r\n      alert('Code must be exactly 10 alphanumeric characters.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${BACKEND_URL}/download/${trimmedCode}`);\r\n      const blob = await response.blob();\r\n\r\n      if (!response.ok) {\r\n        const text = await blob.text();\r\n        throw new Error(text || 'Download failed');\r\n      }\r\n\r\n      if (blob.type === 'application/json') {\r\n        const json = await blob.text();\r\n        setResult(JSON.parse(json));\r\n      } else {\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = 'burnzip-download';\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n        setResult({ message: '‚úÖ File downloaded successfully.' });\r\n      }\r\n\r\n      setError('');\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(`‚ùå ${err.message}`);\r\n      setResult(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ textAlign: 'center', marginTop: '6vh', padding: '20px' }}>\r\n      <h2>üì• Retrieve from BurnZip</h2>\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"Enter 10-char code\"\r\n        value={code}\r\n        onChange={(e) => setCode(e.target.value)}\r\n        maxLength={10}\r\n        style={{ padding: '8px', fontSize: '16px', marginBottom: '10px' }}\r\n      />\r\n      <br />\r\n      <button\r\n        onClick={handleDownload}\r\n        style={{ padding: '10px 20px', fontSize: '16px', cursor: 'pointer' }}\r\n      >\r\n        Download\r\n      </button>\r\n\r\n      {result && result.message && (\r\n        <p style={{ marginTop: '20px' }}>{result.message}</p>\r\n      )}\r\n\r\n      {result && result.text && (\r\n        <textarea\r\n          readOnly\r\n          value={result.text}\r\n          rows={6}\r\n          style={{ width: '80%', marginTop: '20px', padding: '10px' }}\r\n        />\r\n      )}\r\n\r\n      {error && (\r\n        <p style={{ color: 'red', marginTop: '20px' }}>{error}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DownloadPage;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}